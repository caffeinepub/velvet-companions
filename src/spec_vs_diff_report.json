{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-16T21:15:36.905Z",
  "summary": "Diff adds a Motoko backend with companion profiles, booking requests, and access-control mixins, plus a React/TanStack Router frontend with landing/browse/profile/admin routes, age gate, auth/admin guards, booking request dialog, and luxury-themed styling. Several core spec fields/behaviors are either not evidenced or diverge from requested data models.",
  "missing_requirements": [
    {
      "id": "REQ-3",
      "requirement": "Admin companion profile management must support fields: display name, headline, bio, location, age (18+), photos (URLs or static assets), tags/categories, and status (published/unpublished), with backend validation including 18+ enforcement.",
      "reason": "Backend Profile type shown does not include headline, bio, location, age, photos array, tags, or published/unpublished status; and no evidence of 18+ validation. Frontend card uses description/category/languages rather than required fields.",
      "evidence": [
        "backend/main.mo",
        "frontend/src/components/companions/CompanionCard.tsx"
      ]
    },
    {
      "id": "REQ-3",
      "requirement": "Admin can delete profiles (moderation remove/hide) and unpublished profiles must not appear publicly.",
      "reason": "Diff shows createOrUpdateProfile and adminUpdateProfileStatus, plus queries named getActiveProfiles/getAllProfiles on frontend, but no evidenced delete API or explicit published/unpublished behavior in the shown backend snippet (status values are active/inactive/review, not published/unpublished).",
      "evidence": [
        "backend/main.mo",
        "frontend/src/hooks/useQueries.ts"
      ]
    },
    {
      "id": "REQ-4",
      "requirement": "Booking request status lifecycle should include cancelled (e.g., pending/accepted/rejected/cancelled) and be persisted.",
      "reason": "Backend BookingRequest.Status shown includes pending/accepted/rejected/completed, but no cancelled status is evidenced.",
      "evidence": [
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-7",
      "requirement": "Backend must expose query methods for listing published profiles and fetching a profile by id; and admin-only update methods for creating/updating/publishing/deleting profiles; and admin-only methods for updating booking status.",
      "reason": "Frontend hooks call getActiveProfiles/getAllProfiles/submitBookingRequest/getAllBookings, but the diff snippet does not evidence profile-by-id query, delete profile, publish/unpublish APIs, or booking status update APIs (backend file is truncated).",
      "evidence": [
        "backend/main.mo",
        "frontend/src/hooks/useQueries.ts"
      ]
    },
    {
      "id": "REQ-8",
      "requirement": "Generated images must be added under frontend/public/assets/generated with specified filenames (logo-wordmark.dim_512x192.png, hero-background.dim_1920x1080.png).",
      "reason": "UI references the logo path, but the diff summary does not show the actual asset files being added (they may be in omitted files). The hero background usage is also not evidenced in the provided snippets.",
      "evidence": [
        "frontend/src/components/layout/SiteHeader.tsx",
        "frontend/src/components/layout/SiteFooter.tsx",
        "frontend/src/App.tsx"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "User profile storage and mandatory profile setup modal (name/email/phone) for signed-in users.",
      "reason": "BuildRequest does not ask for user profile objects or a profile-setup onboarding modal; it focuses on roles, companion profiles, and bookings.",
      "evidence": [
        "backend/main.mo",
        "frontend/src/components/auth/ProfileSetupModal.tsx",
        "frontend/src/hooks/useQueries.ts"
      ]
    },
    {
      "description": "Companion profile fields not requested: principal owner, priceRange, languages, and multi-dimension ratings.",
      "reason": "Requested companion profile schema differs (headline/bio/location/age/photos/tags/status). Added extra fields are not in the BuildRequest.",
      "evidence": [
        "backend/main.mo"
      ]
    },
    {
      "description": "Secret-based access control initialization via URL parameter (caffeineAdminToken) and a footer attribution link to caffeine.ai with tracking parameters.",
      "reason": "Not requested in requirements; admin allowlist was required to be backend-maintained by principal allowlist, not initialized via URL secret; external attribution/tracking link not requested.",
      "evidence": [
        "frontend/src/hooks/useActor.ts",
        "frontend/src/components/layout/SiteFooter.tsx"
      ]
    }
  ],
  "confidence": 0.68,
  "changed_files": [
    "all_files_summary.json",
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/index.css",
    "frontend/index.html",
    "frontend/src/App.tsx",
    "frontend/src/components/admin/ProfileStatusBadge.tsx",
    "frontend/src/components/auth/LoginButton.tsx",
    "frontend/src/components/auth/ProfileSetupModal.tsx",
    "frontend/src/components/bookings/BookingRequestDialog.tsx",
    "frontend/src/components/companions/CompanionCard.tsx",
    "frontend/src/components/companions/CompanionGallery.tsx",
    "frontend/src/components/compliance/AgeGateModal.tsx",
    "frontend/src/components/guards/RequireAdmin.tsx",
    "frontend/src/components/guards/RequireAgeGate.tsx",
    "frontend/src/components/guards/RequireAuth.tsx",
    "frontend/src/components/layout/EditorialSection.tsx",
    "frontend/src/components/layout/SiteFooter.tsx",
    "frontend/src/components/layout/SiteHeader.tsx",
    "frontend/src/hooks/useActor.ts",
    "frontend/src/hooks/useAuthz.ts",
    "frontend/src/hooks/useInternetIdentity.ts",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/index.css",
    "frontend/src/lib/errorFormatting.ts",
    "frontend/src/main.tsx",
    "frontend/src/pages/BrowseCompanionsPage.tsx",
    "frontend/src/pages/CompanionProfilePage.tsx",
    "frontend/src/pages/LandingPage.tsx",
    "frontend/src/pages/PrivacyPage.tsx",
    "frontend/src/pages/TermsDisclaimerPage.tsx",
    "frontend/src/pages/admin/AdminBookingDetailPage.tsx",
    "frontend/src/pages/admin/AdminBookingsPage.tsx",
    "frontend/src/pages/admin/AdminProfileEditorPage.tsx",
    "frontend/src/pages/admin/AdminProfilesPage.tsx",
    "frontend/src/utils/urlParams.ts",
    "frontend/tailwind.config.js",
    "project_state.json"
  ]
}